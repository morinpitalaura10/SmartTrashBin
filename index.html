<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Smart Trash Bin Dashboard</title>

  <!-- ====== LOGIN GUARD ====== -->
  <script>
    (function () {
      // Kalau belum login, arahkan ke login.html
      if (!localStorage.getItem('stb-auth')) {
        location.href = 'login.html';
      }
    })();
  </script>

  <!-- Font Awesome -->
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- Styles -->
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- ROW: sidebar + main -->
  <div class="main-container">
    <!-- ====== SIDEBAR (include) ====== -->
    <div data-include="components/sidebar.html"></div>

    <!-- ====== KONTEN ====== -->
    <main class="content" id="content">
      <!-- ====== HEADER (include) ====== -->
      <div data-include="components/header.html"></div>

      <!-- Tempat render halaman -->
      <div id="page"></div>
    </main>
  </div>

  <!-- ====== FOOTER (include) â€” DI LUAR .main-container ====== -->
  <div data-include="components/footer.html"></div>

  <!-- ====== SCRIPT ====== -->
  <script src="include.js"></script>
  <script src="script.js"></script>

  <script>
    document.addEventListener("componentsLoaded", () => {
      document.querySelector(".dashboard-header")?.classList.add("show");

      // Tema dark/light mode
      const toggle = document.getElementById("toggle-theme");
      const saved = localStorage.getItem("stb-theme");
      if (saved === "dark") {
        document.body.classList.add("dark-mode");
        if (toggle) toggle.checked = true;
      }
      toggle?.addEventListener("change", () => {
        const dark = toggle.checked;
        document.body.classList.toggle("dark-mode", dark);
        localStorage.setItem("stb-theme", dark ? "dark" : "light");
      });
    });
  </script>
</body>
</html>
